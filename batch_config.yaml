# ===========================================
# 星火知识库服务地址与端口配置
# ===========================================
server:
  # CKB (知识库) 服务器配置
  ckb_ip: "uat-kbadmin.e-sscard.com"  # CKB服务器IP地址
  ckb_port: 8086                      # CKB服务器端口号

  # UAP (用户接入平台) 服务器配置
  uap_ip: "uat-kbadmin.e-sscard.com"  # UAP服务器IP地址
  uap_port: 8086                      # UAP服务器端口号

  # 认证信息配置
  login_name: "ckbAdmin"              # 当前使用的登录用户名
  password: "IFlytek2024"             # 当前使用的登录密码
  app_code: "spark_knowledge_base"    # 应用代码

# ===========================================
# 模型设置
# ===========================================
effect:
  qa_model: "Spark13B"                # 问答模型名称
  embed_model: "xhdmx1"               # 嵌入模型名称

  # 知识检索相关配置
  embeddingTop: 5                     # 嵌入检索数量
  esTop: 2                          # ES检索数量
  qaThresholdScore: "0.9"            # QA阈值分数
  thresholdScore: "0.001"            # 通用阈值分数
  sparkEnable: true                  # 启用星火模型
  dialogueTop: 5                     # 对话检索数量
  qaTop: 0                        # QA检索数量

  # 知识库配置
  # dblist: 知识库列表（空表示使用所有可用知识库）
  # libId: 知识库ID
  # version: 知识库版本号
  dblist:
    - libId: "f26c75f2ffac463a95d008ca9ae8fb4e"
      version: 1
  # 示例：多个知识库
  # dblist:
  #   - libId: "531c209c4d6144a3b2a9a8573415e484"
  #     version: 1
  #   - libId: "123111112312"
  #     version: 1

  # 分类列表（空表示处理所有分类）
  category: []
  # 示例：多个分类
  # category:
  #   - "23e3ec238926bde3e01122ddddf90adf"
  #   - "e1c14aa9afded82e4a7d0f2adaf900c8"
  #   - "34772cf11e866691174fd21471ea8974"
  #   - "58655d6e4a71cbc7d834453fa210f20a"

# ===========================================
# 任务配置部分
# ===========================================
mission:
  # 大模型标注任务配置(可选)
  # check_answer_by_llm: "spark"     # "spark": 使用讯飞星火模型进行答案标注
  # check_answer_by_llm: ""          # "": 空字符串表示不执行标注
  check_answer_by_llm: null

  # 检索一致性检测配置
  check_source_by_rule: false       # 是否启用检索一致性检测，true/false

  # 数据集文件配置
  input_file: "data/test_examples.xlsx"                # 输入数据文件路径（Excel格式）
  output_file: "data/test_examples_output.xlsx"      # 输出结果文件路径（Excel格式）

  # 知识检索配置
  knowledge_num: 10                  # 检索知识条数，范围1-50，用于问答时从知识库中检索相关文档

  # 认证刷新配置
  auth_refresh_interval: 10         # 每处理N条数据后自动刷新授权（0表示禁用）
  auth_refresh_time_minutes: 30     # 每N分钟后自动刷新授权（0表示禁用）

  # 线程配置
  thread_num: 2                      # 并发处理线程数

# ===========================================
# 讯飞星火大模型配置部分
# ===========================================
spark:
  spark_url: "wss://spark-api.xf-yun.com/v3.5/chat"  # 讯飞星火API WebSocket连接地址

  # 公网大模型认证参数（如果使用公网大模型，请填写下面参数）
  app_id: "6ceb25"                  # 应用ID，用于标识调用方
  key: "c5784ba540564e1d3dfd969"    # API密钥
  secret: "YTgwZDIyzE4NDk1Mzc4"      # API密钥对应的密钥
  domain: "generalv3.5"              # 模型域名，generalv3.5表示通用对话模型v3.5版本

# ===========================================
# 大模型提示词配置
# ===========================================
prompt:
  # 用于数据标注的提示词模板，指导大模型进行答案质量评估
  prompt: |
    假如你是一个数据标注工程师，给你一条待标注数据，数据中包含"用户问题"、"标准答案"、"生成答案"3个字段。你的任务是结合"用户问题"与"标准答案"中的内容，判断"生成答案"是否正确，如果正确，"待标注结果"标注为"1"，如果错误，"待标注结果"标注为"0"，如果不确定，"待标注结果"标注为"2"。要求如下：仅输出"待标注结果"，用0或者1或者2表示，0表示错误，1表示正确，2表示不确定，不得输出额外内容。以下是3条标注示例，可以参考：
    示例1：
    输入：
    用户问题：工作10年有几天年假？
    标准答案：根据年休假规则，工作10年有10天年假
    生成答案：10天
    输出：1
    示例2：
    输入：
    用户问题：我想知道丧假怎么请
    标准答案：根据丧假规则，一般不超过3天，包括法定节假日
    生成答案：事假最多有90天
    输出：0
    示例3：
    输入：
    用户问题：我的大伯去世可以请丧假吗？
    标准答案：父母、配偶等直系亲属去世才可以请丧假，大伯去世不能请丧假
    生成答案：父母、配偶等直系亲属去世可以请丧假
    输出：2
    现在请开始执行任务：
    用户问题：${question}
    标准答案：${answer}
    生成答案：${llm_response}
    输出：

